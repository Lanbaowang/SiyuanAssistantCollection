/* esm.sh - esbuild bundle(string_decoder@1.3.0) es2022 production */
import * as __0$ from "./buffer.js";
var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({},m);switch(n){case"buffer":return e(__0$);default:throw new Error("module \""+n+"\" not found");}};
var B=Object.create;var c=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var L=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var A=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),D=(t,e)=>{for(var r in e)c(t,r,{get:e[r],enumerable:!0})},f=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of k(e))!U.call(t,n)&&n!==r&&c(t,n,{get:()=>e[n],enumerable:!(s=_(e,n))||s.enumerable});return t},l=(t,e,r)=>(f(t,e,"default"),r&&f(r,e,"default")),m=(t,e,r)=>(r=t!=null?B(L(t)):{},f(e||!t||!t.__esModule?c(r,"default",{value:t,enumerable:!0}):r,t));var v=x((d,C)=>{var u=A("buffer"),i=u.Buffer;function w(t,e){for(var r in t)e[r]=t[r]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?C.exports=u:(w(u,d),d.Buffer=h);function h(t,e,r){return i(t,e,r)}h.prototype=Object.create(i.prototype);w(i,h);h.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return i(t,e,r)};h.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var s=i(t);return e!==void 0?typeof r=="string"?s.fill(e,r):s.fill(e):s.fill(0),s};h.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return i(t)};h.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return u.SlowBuffer(t)}});var N=x(S=>{"use strict";var p=v().Buffer,y=p.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function F(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function j(t){var e=F(t);if(typeof e!="string"&&(p.isEncoding===y||!y(t)))throw new Error("Unknown encoding: "+t);return e||t}S.StringDecoder=o;function o(t){this.encoding=j(t);var e;switch(this.encoding){case"utf16le":this.text=G,this.end=H,e=4;break;case"utf8":this.fillLast=O,e=4;break;case"base64":this.text=J,this.end=K,e=3;break;default:this.write=M,this.end=Q;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=p.allocUnsafe(e)}o.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};o.prototype.end=W;o.prototype.text=P;o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function g(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function q(t,e,r){var s=e.length-1;if(s<r)return 0;var n=g(e[s]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--s<r||n===-2?0:(n=g(e[s]),n>=0?(n>0&&(t.lastNeed=n-2),n):--s<r||n===-2?0:(n=g(e[s]),n>=0?(n>0&&(n===2?n=0:t.lastNeed=n-3),n):0))}function I(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function O(t){var e=this.lastTotal-this.lastNeed,r=I(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function P(t,e){var r=q(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var s=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,s),t.toString("utf8",e,s)}function W(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function G(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var s=r.charCodeAt(r.length-1);if(s>=55296&&s<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function H(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function J(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function K(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function M(t){return t.toString(this.encoding)}function Q(t){return t&&t.length?this.write(t):""}});var a={};D(a,{StringDecoder:()=>R,default:()=>X});var E=m(N());l(a,m(N()));var{StringDecoder:R}=E,{default:T,...V}=E,X=T!==void 0?T:V;export{R as StringDecoder,X as default};
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=string_decoder.bundle.mjs.map